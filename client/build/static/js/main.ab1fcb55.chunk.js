(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{197:function(e,a,t){},198:function(e,a,t){},339:function(e,a,t){"use strict";t.r(a);var r=t(0),c=t.n(r),n=t(46),s=t.n(n),i=(t(197),t.p,t(198),t(52)),o=t(24),l=t(25),j=t.n(l),d=t(1),u=t(38),b=t(6),p=t(31),h=t(71),O=t(89),x=t(26),m=t(50),f=t.n(m),v=t(2),g=Object(r.createContext)(),C=function(e){var a=Object(r.useState)(JSON.parse(localStorage.getItem("usuario"))),t=Object(b.a)(a,2),c=t[0],n=t[1];return Object(v.jsx)(g.Provider,{value:{usuario:c,setUsuario:n},children:e.children})},y=t(33),k=t.n(y),w=function(){var e=Object(r.useContext)(g).usuario,a=Object(o.f)(),t=Object(r.useState)({name:"",url:"",position:"",pegLeg:!0,eyePatch:!0,hookHand:!0,treasure:"",phrases:""}),c=Object(b.a)(t,2),n=c[0],s=(c[1],x.c().shape({name:x.e().min(2,"M\xednimo 2 caracteres!").required("Este campo es requerido"),url:x.e().min(2,"M\xednimo 2 caracteres!").required("Este campo es requerido"),position:x.e().required("Este campo es requerido"),pegLeg:x.a().required("Este campo es requerido"),eyePatch:x.a().required("Este campo es requerido"),hookHand:x.a().required("Este campo es requerido"),treasure:x.b().required("Este campo es requerido"),phrases:x.e().min(2,"M\xednimo 2 caracteres!").required("Este campo es requerido")})),i=function(){var t=Object(u.a)(j.a.mark((function t(r){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{c=Object(d.a)(Object(d.a)({},r),{},{autor:e._id}),f.a.post("http://localhost:8000/api/piratas/new",c),k.a.fire("Good job!","Se ha creado el pirata","success"),a.push("/")}catch(n){k.a.fire({icon:"error",title:"Oops...",text:n.response.data.error.message})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"formulario"}),Object(v.jsx)(O.b,{initialValues:n,validationSchema:s,onSubmit:i,children:function(e){var a=e.errors,t=e.touched,r=e.getFieldProps;return Object(v.jsxs)(O.a,{children:[Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Label,{children:"Nombre"}),Object(v.jsx)(p.a.Control,Object(d.a)({type:"text",placeholder:"Ingresar nombre",name:"name",value:n.name},r("name"))),Object(v.jsx)("p",{children:a.name&&t.name&&a.name})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Label,{children:"URL de imagen"}),Object(v.jsx)(p.a.Control,Object(d.a)({type:"text",placeholder:"Ingresar url",name:"url",value:n.url},r("url"))),Object(v.jsx)("p",{children:a.url&&t.url&&a.url})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Label,{children:"N cofres de tesoro"}),Object(v.jsx)(p.a.Control,Object(d.a)({type:"number",placeholder:"Ingresar n\xfamero de tesoros",name:"treasure",value:n.treasure},r("treasure"))),Object(v.jsx)("p",{children:a.treasure&&t.treasure&&a.treasure})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Label,{children:"frase del pirata"}),Object(v.jsx)(p.a.Control,Object(d.a)({type:"text",placeholder:"Ingresar frase del pirata",name:"phrases",value:n.phrases},r("phrases"))),Object(v.jsx)("p",{children:a.phrases&&t.phrases&&a.phrases})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Label,{children:"Cargo"}),Object(v.jsxs)(p.a.Select,Object(d.a)(Object(d.a)({"aria-label":"Default select example",value:null===n||void 0===n?void 0:n.position},r("position")),{},{children:[Object(v.jsx)("option",{value:"",children:" seleccione una opcion"}),Object(v.jsx)("option",{value:"Capitan",children:"Capitan"}),Object(v.jsx)("option",{value:"Primer Oficial",children:"Primer Oficial"}),Object(v.jsx)("option",{value:"Maestro Cuarto",children:"Maestro Cuarto"}),Object(v.jsx)("option",{value:"Barcaza",children:"Barcaza"}),Object(v.jsx)("option",{value:"Chico Polvora",children:"Chico Polvora"})]})),Object(v.jsx)("p",{className:"errors",children:a.position&&t.position&&a.position})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Check,Object(d.a)({name:"pegLeg",label:"pata de palo",value:null===n||void 0===n?void 0:n.pegLeg},r("pegLeg"))),Object(v.jsx)("p",{className:"errors",children:a.position&&t.position&&a.position})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Check,Object(d.a)({name:"eyePatch",label:"parche en el ojo",value:null===n||void 0===n?void 0:n.eyePatch},r("eyePatch"))),Object(v.jsx)("p",{className:"errors",children:a.position&&t.position&&a.position})]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(v.jsx)(p.a.Check,Object(d.a)({name:"hookHand",label:"gancho de mano",value:null===n||void 0===n?void 0:n.hookHand},r("hookHand"))),Object(v.jsx)("p",{className:"errors",children:a.position&&t.position&&a.position})]}),Object(v.jsx)(h.a,{variant:"primary",type:"submit",children:"Crear pirata"})]})}})]})},q=t(4),P=t(176),I=t(177),N=t(78),E=t(343),S=function(){var e=Object(r.useContext)(g),a=e.usuario,t=e.setUsuario,c=Object(o.f)();Object(r.useEffect)((function(){a||c.push("/login")}),[a]);return Object(v.jsx)(P.a,{children:Object(v.jsxs)(I.a,{children:[Object(v.jsx)(N.a,{}),Object(v.jsx)(N.a,{xs:5}),Object(v.jsxs)(N.a,{style:{textAlign:"right"},children:[Object(v.jsxs)("h5",{children:["Usuario: ","".concat(null===a||void 0===a?void 0:a.first_name," ").concat(null===a||void 0===a?void 0:a.last_name)]}),Object(v.jsx)(h.a,{variant:"primary",onClick:function(){t(null),localStorage.clear()},children:"Cerrar sesion"})]})]})})},L=function(){var e=Object(o.h)().id,a=Object(r.useState)(),t=Object(b.a)(a,2),c=t[0],n=t[1],s=function(){var e=Object(u.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("http://localhost:8000/api/piratas/pirata/".concat(a));case 3:t=e.sent,n(t.data.pirata),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),k.a.fire({icon:"error",title:"Oops...",text:"al traer los datos"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){s(e)}),[]);var l=function(e){c[e.target.name]=e.target.checked,n(Object(d.a)(Object(d.a)({},c),{},Object(q.a)({},e.target.name,e.target.checked))),h()},h=function(){var a=Object(u.a)(j.a.mark((function a(){var t;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.put("http://localhost:8000/api/piratas/update/".concat(e),c);case 3:t=a.sent,n(t.data.updatePirata),k.a.fire("Good job!",t.data.msg,"success"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),k.a.fire({icon:"error",title:"Oops...",text:"Existe problemas para actualizar el pirata"});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{}),Object(v.jsxs)(P.a,{children:[Object(v.jsxs)(I.a,{children:[Object(v.jsx)(N.a,{}),Object(v.jsx)(N.a,{xs:5,children:Object(v.jsx)("h1",{children:null===c||void 0===c?void 0:c.name})}),Object(v.jsx)(N.a,{children:Object(v.jsx)(i.b,{to:"/",children:"volver al detalle de piratas"})})]}),Object(v.jsxs)(I.a,{children:[Object(v.jsxs)(N.a,{xs:6,children:[Object(v.jsx)("img",{src:null===c||void 0===c?void 0:c.url,alt:"",width:"400px",height:"200px"}),Object(v.jsx)("br",{}),Object(v.jsx)("h2",{children:'" '.concat(null===c||void 0===c?void 0:c.phrases,' "')})]}),Object(v.jsx)(N.a,{xs:6,children:Object(v.jsx)(E.a,{children:Object(v.jsxs)(E.a.Body,{children:[Object(v.jsx)(E.a.Title,{children:"Sobre el pirata"}),Object(v.jsxs)(E.a.Text,{children:["Posici\xf3n: ",null===c||void 0===c?void 0:c.position," ",Object(v.jsx)("br",{}),"Tesoros: ",null===c||void 0===c?void 0:c.treasure," ",Object(v.jsx)("br",{}),Object(v.jsx)(p.a.Check,{type:"switch",name:"pegLeg",label:"Pata de palo: ".concat((null===c||void 0===c?void 0:c.pegLeg)?"SI":"NO"),checked:null===c||void 0===c?void 0:c.pegLeg,onChange:function(e){return l(e)}}),Object(v.jsx)("br",{}),Object(v.jsx)(p.a.Check,{type:"switch",name:"eyePatch",label:"Parche en el ojo: ".concat((null===c||void 0===c?void 0:c.eyePatch)?"SI":"NO"),checked:null===c||void 0===c?void 0:c.eyePatch,onChange:function(e){return l(e)}}),Object(v.jsx)("br",{}),Object(v.jsx)(p.a.Check,{type:"switch",name:"hookHand",label:"Gancho de mano: ".concat((null===c||void 0===c?void 0:c.hookHand)?"SI":"NO"),checked:null===c||void 0===c?void 0:c.hookHand,onChange:function(e){return l(e)}}),Object(v.jsx)("br",{})]})]})})})]})]})]})},_=x.c().shape({first_name:x.e().min(2,"nombre debe tener m\xe1s de 2 caracteres").required("Required"),last_name:x.e().min(2,"Apellido debe tener m\xe1s de 2 caracteres").required("Required"),email:x.e().email("Email incorrecto").required("Required"),password:x.e().min(4,"Debe tener minimo 4 caracteres").required("Required"),confirmPassword:x.e().min(4,"Debe tener minimo 4 caracteres").required("Required").oneOf([x.d("password"),null],"Las contrase\xf1as deben coincidir")}),G=x.c().shape({email:x.e().email("Invalid email").required("Required"),password:x.e().min(4,"Debe tener minimo 4 caracteres").required("Required")}),B=function(e){var a=e.esLogin,t=Object(r.useContext)(g).setUsuario,c=Object(o.f)(),n=function(){var e=Object(u.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("http://localhost:8000/api/aut/registrar",a);case 3:e.sent,k.a.fire("Good job!","Se ha creado el usuario","success"),c.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k.a.fire({icon:"error",title:"Oops...",text:e.t0.response.data.error.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(u.a)(j.a.mark((function e(a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("http://localhost:8000/api/aut/login",a);case 3:r=e.sent,t(r.data.usuario),localStorage.setItem("usuario",JSON.stringify(r.data.usuario)),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),401===e.t0.response.status?k.a.fire({icon:"error",title:"Oops...",text:e.t0.response.data.error}):k.a.fire({icon:"error",title:"Oops...",text:"Hubo problemas"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsx)(O.b,{initialValues:{first_name:"",last_name:"",email:"",password:"",confirmPassword:""},validationSchema:a?G:_,onSubmit:function(e){console.log(e),a?s(e):n(e)},children:function(e){var t=e.errors,r=e.touched,c=e.handleChange,n=e.handleSubmit;return Object(v.jsxs)(p.a,{noValidate:!0,onSubmit:n,children:[a?"":Object(v.jsxs)(p.a.Group,{className:"mb-3",children:[Object(v.jsx)(p.a.Label,{children:"Nombre"}),Object(v.jsx)(p.a.Control,{type:"text",name:"first_name",placeholder:"Ingresar Nombre",onChange:c}),t.first_name&&r.first_name?Object(v.jsx)("div",{children:t.first_name}):null]}),a?"":Object(v.jsxs)(p.a.Group,{className:"mb-3",children:[Object(v.jsx)(p.a.Label,{children:"Apellido"}),Object(v.jsx)(p.a.Control,{type:"text",name:"last_name",placeholder:"Ingresar Apellido",onChange:c}),t.last_name&&r.last_name?Object(v.jsx)("div",{children:t.last_name}):null]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",children:[Object(v.jsx)(p.a.Label,{children:"Email"}),Object(v.jsx)(p.a.Control,{type:"email",name:"email",placeholder:"Ingresar Email",onChange:c}),t.email&&r.email?Object(v.jsx)("div",{children:t.email}):null]}),Object(v.jsxs)(p.a.Group,{className:"mb-3",c:!0,children:[Object(v.jsx)(p.a.Label,{children:"Contrase\xf1a"}),Object(v.jsx)(p.a.Control,{type:"password",name:"password",placeholder:"Ingresar Contrase\xf1a",onChange:c}),t.password&&r.password?Object(v.jsx)("div",{children:t.password}):null]}),a?"":Object(v.jsxs)(p.a.Group,{className:"mb-3",children:[Object(v.jsx)(p.a.Label,{children:"Confirmar Contrase\xf1a"}),Object(v.jsx)(p.a.Control,{type:"password",name:"confirmPassword",placeholder:"Ingresar Confirmar Contrase\xf1a",onChange:c}),t.confirmPassword&&r.confirmPassword?Object(v.jsx)("div",{children:t.confirmPassword}):null]}),Object(v.jsx)(h.a,{variant:"primary",type:"submit",children:a?"iniciar sesion":"registrar"})]})}})})},F=function(){var e=Object(r.useState)(!0),a=Object(b.a)(e,2),t=a[0],c=a[1],n=Object(o.g)(),s=Object(o.f)(),i=Object(r.useContext)(g).usuario;Object(r.useEffect)((function(){i&&s.push("/"),"/registrar"===n.pathname&&c(!1)}),[]);return Object(v.jsx)("div",{children:Object(v.jsxs)(P.a,{children:[Object(v.jsxs)(I.a,{children:[Object(v.jsx)(N.a,{}),Object(v.jsx)(N.a,{xs:5,style:{textAlign:"center"},children:t?Object(v.jsx)("h1",{children:"Login"}):Object(v.jsx)("h1",{children:"Registro"})}),Object(v.jsx)(N.a,{})]}),Object(v.jsx)(B,{esLogin:t}),Object(v.jsxs)(I.a,{children:[Object(v.jsx)(N.a,{}),Object(v.jsx)(N.a,{xs:5,style:{textAlign:"center"},children:Object(v.jsx)(h.a,{variant:"link",onClick:function(){t?(c(!1),s.push("/registrar")):(c(!0),s.push("/login"))},children:t?"ir a registrar":"ir a login"})}),Object(v.jsx)(N.a,{})]})]})})},A=t(344),H=t(342),R=function(){var e=Object(r.useContext)(g).usuario,a=Object(r.useState)(),t=Object(b.a)(a,2),c=t[0],n=t[1],s=Object(o.f)(),l=[{title:"Foto del Pirata",dataIndex:"url",key:"url",render:function(e,a){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("img",{src:a.url,alt:"",width:"50px"})})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Acciones",key:"acciones",render:function(e,a){return Object(v.jsxs)(A.b,{size:"middle",children:[Object(v.jsx)(h.a,{variant:"primary",onClick:function(){return x(a._id)},children:"ver pirata"},"1"),Object(v.jsx)(h.a,{variant:"danger",onClick:function(){return O(a._id)},children:"Eliminar"},"2")]})}}],d=c,p=function(){var a=Object(u.a)(j.a.mark((function a(){var t;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("http://localhost:8000/api/piratas/".concat(e._id));case 3:t=a.sent,n(t.data.piratas),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("err",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}();Object(r.useEffect)((function(){p()}),[]);var O=function(){var e=Object(u.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("http://localhost:8000/api/piratas/delete/".concat(a));case 3:e.sent,p(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),k.a.fire({icon:"error",title:"Oops...",text:"al eliminar al pirata"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),x=function(e){s.push("/ver-detallePirata/".concat(e))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{}),Object(v.jsxs)(P.a,{children:[Object(v.jsxs)(I.a,{children:[Object(v.jsx)(N.a,{}),Object(v.jsx)(N.a,{xs:5,style:{textAlign:"center"},children:Object(v.jsx)("h1",{children:"Piratas"})}),Object(v.jsx)(N.a,{children:Object(v.jsx)(i.b,{to:"/ingresar-pirata",children:"Agregar nuevo pirata"})})]}),Object(v.jsx)(H.a,{columns:l,dataSource:d})]})]})},M=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(i.a,{children:Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{exact:!0,path:"/login",children:Object(v.jsx)(F,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/registrar",children:Object(v.jsx)(F,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/ingresar-pirata",children:Object(v.jsx)(w,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/ver-detallePirata/:id",children:Object(v.jsx)(L,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/",children:Object(v.jsx)(R,{})})]})})})};var D=function(){return Object(v.jsx)(C,{children:Object(v.jsx)(M,{})})},T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,345)).then((function(a){var t=a.getCLS,r=a.getFID,c=a.getFCP,n=a.getLCP,s=a.getTTFB;t(e),r(e),c(e),n(e),s(e)}))};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(D,{})}),document.getElementById("root")),T()}},[[339,1,2]]]);
//# sourceMappingURL=main.ab1fcb55.chunk.js.map